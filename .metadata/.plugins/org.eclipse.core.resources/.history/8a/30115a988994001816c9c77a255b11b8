package com.runsystem.datnt.business;

import com.runsystem.datnt.database.service.StudentInfoService;
import com.runsystem.datnt.database.service.StudentService;
import com.runsystem.datnt.dto.Student;
import com.runsystem.datnt.dto.StudentInfo;

public class CreateStudent {
	
	public boolean create(StudentService service, StudentInfoService infoService, Student student, StudentInfo studentInfo) {
		
		int nextID = service.getMaxID().getStudentID() + 1;
		
		Student students = 
				new Student(nextID + 1, student.getStudentName(), student.getStudentCode());
		StudentInfo info = 
				new StudentInfo(nextID, studentInfo.getAddress(), studentInfo.getAvgScore(),
						studentInfo.getDateOfBirth());
		if (service.insert(students) > 0) {
			if (infoService.insert(info) > 0) {
				return true;
			} else {
				service.delete(students);
			}
		}
		return false;
	}

}

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.runsystem.datnt.database.mapper.IFullStudentInfoMapper">
	
	<resultMap type="FullStudentInfo" id="fullStudentInfo">
		<result property="studentId" column="studentid" />
		<result property="infoId" column="infoid" />
		<result property="studentName" column="studentname" />
		<result property="studentCode" column="studentcode" />
		<result property="address" column="address" />
		<result property="dateOfBirth" column="dateofbirth" />
		<result property="avgScore" column="averagescore" />
	</resultMap>
	
	<select id="search"  parameterType="Student" resultType="fullStudentInfo">
		SELECT s.studentid, s.studentname, s.studentcode, si.infoid, si.address, si.averagescore, si.dateofbirth 
		FROM student s, studentinfo si
		WHERE  s.studentid = si.studentid 
		<if test="studentCode != null">
			AND s.studentcode like '%${studentCode}%'
		</if>
		<if test="studentName != null">
			AND s.studentname like '%${studentName}%'
		</if>
	</select>
	
	<select id="count" parameterType="Student"   resultType="int">
		SELECT COUNT(*) 
		FROM student s, studentinfo si
		WHERE  s.studentid = si.studentid 
		<if test="studentCode != null">
			AND s.studentcode like '%${studentCode}%'
		</if>
		<if test="studentName != null">
			AND s.studentname like '%${studentName}%'
		</if>
	</select>

</mapper>